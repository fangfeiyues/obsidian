Redis、MySQL、RocketMQ、HBase等都涉及到存储&查询。那其中的区别是什么？相似点又在哪？

（一个存储介质，它的核心步骤）
-  **MySQL** 
    1.  类型：关系型数据库  [[MySQL-3 查询]]
    2.  特征：（特性决定了实现方式）
	    1.  能够处理复杂数据操作。如范围查询、like查询、任一字段排序、批量更新等
	    2.  多线程处理客户端请求。充分利用CPU，加快响应时间
	    3.  数据存储在磁盘文件，也提供索引文件和缓存buffer
	    4.  利用B+树 “矮胖” 特征减少IO加快读
	    5.  整体读写受限于磁盘I/O能力
	    6.  事务上支持ACID
    3.  存储：
	    1.  客户端发起请求
	    2.  -> server检查 
	    3.  -> 是否在内存？在-> 读&写 buffer pool，不在-> 写 change buffer
	    5.  -> InnoDB  prepare  redo_log
	    6.  -> 刷脏（异步）
	    7.  -> 执行器 生产 binlog 并写入磁盘
	    8.  -> InnoDB  commit  redo_log
	    9.  -> 主从同步
    5.  缓存
    6.  事务：（原子性、持久性、隔离性、一致性）
    7.  索引：
    8.  查询：
    9.  集群



-  **Redis**
    1.  数据类型：K-V数据库  [[Redis-2 查询]]
    2.  特征
	    1.  简单大量的读写。get使用最为频繁
	    2.  I/O多路复用 + 多线程
	    3.  数据存储在内存，但也通过RDB和AOF持久化来放置
	    4.  多种数据结构，来满足不用场景需求
	    5.  内存读写速度快，但不能绝对保持持久？
	    6.  只能基本事务
    3.  存储：
	    1.  客户端发起请求
	    2.  -> I/O 多路复用 + 多线程 处理网络IO请求？
	    3.  -> 写内存 或 虚拟内存部分到磁盘 ( vm_enable = true )
	    4.  -> RDB & AOF 保障内存数据，但不能完全保证持久化
	    5.  -> 内存淘汰
	    6.  -> 复制同步
    4.  缓存：不用（本身就是内存）



-  **MQ**
	1.  数据类型：字符
	2.  特征：
		1.  大量消息，非实时性保障但能持久性
		2.  Netty Reactor模式保证并发
		3.  数据存储在磁盘，但 `mmap` 减少拷贝`ConsumeQueue`等加快读
		4.   ConsumeQueue 和 IndexFile 索引，加快消息读
		5.  无需保证实时读能力
		6.  保证分布式一致性 
	3.  存储：
		1.  Provider 发出消息 
		2.  -> Netty Reactor接收请求
		4.  -> 顺序写CommitLog内存文件  -- 怎么写入优化、vs MySQL
		   （ 内存映射MappedByteBuffer 或者 暂存池加快，但也带来搜索成本 ）
		4.  -> 同步 或 异步刷盘 （ MQ不追求实时性 是跟MySQL Redis本质区别之处 ）
		5.  -> 异步构建 ConsumeQueue 和 IndexFile，并mmap持久化
		6.  -> 消息确认给生产者
	4.  缓存：主要依赖 page buffer（消息推送过程基本都是一次查询不太依赖缓存）



-  **HBase**




|     | MySQL | Redis | RocketMQ | HBase |
| --- | ----- | ----- | -------- | ----- |
|     |       |       |          |       |


