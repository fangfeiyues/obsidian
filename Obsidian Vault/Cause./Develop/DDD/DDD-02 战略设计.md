## 1、战略落地

### 1.1 梳理通用语言

定义：一定上下文内，对业务概念的一致通用表达

一. 总结来说通用语言想要达到几个目的：

1. 通用语言过程进行业务的梳理然后达成通用性
2. 通用语言形成领域为进一步建模作准备

二. 通用语言挖掘方法：【抓住名词，联想动词】

1. 抓住名词：发现通过刷选和抽象的通用语言。一般对应着实体、聚合、值对象等
2. 联想动词：联想到通用语言更多的场景，使其含义更加完整？？？。一般对应着应用服务、领域服务、领域能力等

三.【方法论：思考问题的本质】

怎么快速分析业务，弄明白业务？

5W1H：What，Why，Where，When，Who，How

![[image-DDD-02 战略设计-20240428160722932.png|500]]


## 1.2 落地领域模型

定义：领域模型就是对业务的抽象表达，能够表达出业务的整体架构和核心细节

领域模型就是通过充分的通用语言的沟通后转化而成，其领域模型需要关注几个方面

【领域模型表达什么】

当看到一个领域模型图的时候可以大概清楚业务主体长什么样子、由哪些组成、组成部分的属性和行为等

【如何画一个领域模型图？】

1. 表达出领域元素。实体 + 聚合 + 值对象 + 领域服务 + 行为 + 上下文
2. 表达出领域元素的上下文。上下文关系就两种：包含关系和逻辑关系


![[image-DDD-02 战略设计-20240428160754907.png|600]]




【实体的组成】

```
   领域属性+领域能力
```

【实体与其他元素的边界】

|其他领域元素|关系|
|---|---|
|聚合|实体是聚合的元素；聚合不会包含实体的能力|
|领域服务|使用实体的能力|
|值对象|值对象描述实体|
|工厂|简单实体自己创建；复杂的实体由工厂创建|
|仓储|实体调用仓储进行持久化|

### II. 值对象模型

定义：值对象是对事物的描述，更确切的说是对领域对象的描述

【常用的值对象类型】

1. 领域对象的描述信息
2. 领域层用来解耦的数据载体。层与层之间的数据传输
3. 领域层内部参数的传递

### III. 工厂模型

【注意点】

1. 不要把工厂的创建逻辑直接暴露 比如不要App层直接去调用工厂生成实体，而是实体内部包装一层。这样业务含义就不一样了，app层不需要关注实体的领域能力
2. 工厂创建领域对象是一次性完成的，要么成功要么失败，没有中间创建中状态

一般在领域模型图中不需要把工厂表示出来

### IV. 仓储模型

引用《领域驱动设计：软件核心复杂性应对之道》

<aside> 💡 Repository将同一类型的所有对象表示为一个概念集合，它的行为类似于集合，只是具有更复杂的查询功能。再添加或删除相应类型的对象时，Repository的后台机制负责将对象添加到数据库中，或从数据库中删除对象。这个定义表明，Aggregate把一组紧密相关的职责收集到一起，这些职责提供了对Aggregate根的从其生命周期开始至结束的全部过程

</aside>

上述总结下来：Repository是用来做对象的存储和访问的，作用是让大家始终聚焦领域模型。

【仓储层适不适合直接暴露（反倒结构）】

不建议，可以从应用层到领域层再去基础设置层查询

### V. 领域服务模型

【定义】

```
   领域服务是一个动作，当动作挂不到领域对象上时（动作不是领域能力的时候），我们就把它叫做领域服务。
```

## 1.3 上下文

### I. 上下文边界

上下文边界定义：上下文之间的合作关系，指导上下文间的合作

其上下文之间可能存在的关系有以下7类。

【 SHARE KERNEL 共享内核】

核心思想体现在各个业务方一开始自己干库存、优惠、交易等现在都走到统一的平台，共享模型。

带来的好处

1. 模型统一设计和维护，更加业务内聚
2. 专门的团队干专门的事情，减少重复劳动力
3. 数据保存一处，有利于数据挖掘和分析

【CUSTOMER/SUPPLIER DEVELOPMENT TEAM 上下游合作】

如正常的业务部门跟中台上下游合作关系，平等

【CONFORMIST 跟随模式】

我们跟随别人的API能力处理需求。

这种情况一般需要做好防腐避免因下游不稳定

【ANTICONRRUPTION LAREY 防腐层】

Facade层

【SEPARATE WAY 各行其道】

各个业务自行堆积代码，但最终发展方向仍是共享内核

【OPEN HOST SERVICE 开放服务】

如open接口，原则就是不删不该只新增

### II. 领域归属

在探讨业务对象的责任时候，主要分成三步：

1. 对需求进行抽象
2. 需求应该落那个业务对象上
3. 需求是改变业务对象的什么属性 或者 是什么能力

职责的重要性：搞清楚领域的职责可以帮助自身和其他领域做到高内聚低耦合

### III. 建模技巧

【暂过】