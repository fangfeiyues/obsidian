
## 线程


### 上下文切换

-  **含义**

	上下文切换通常是指在一个CPU上，由于多线程共享一个CPU时间片，当一个线程的时间片用完后，需要切换到另一个线程运行。此时需要保存当前线程的状态信息，包括程序计数器、寄存器、栈指针等，以便下次继续执行该线程时能恢复到正确的执行状态

- **减少切换**

	由于多线程切换需要保存和恢复更多的上下文信息，这会降低系统的运行效率，所以要尽量减少
	1.  减少线程数，通过合理的线程池来管理线程
	2.  使用无锁并发编程，无锁并发编程可以避免线程因等待而进入阻塞状态，从而减少上下文的却换
	3.  使用CAS算法，避免线程阻塞和唤醒
	4.  使用协程



## 线程间通信

- **volatile和synchronized**

	关键字volatile可以用来修饰字段，告诉程序任何对变量的访问均需要从共享内存获取而对他的改变必须同步刷新到共享内存。从而保证所有线程对变量访问的可见性。
	
	关键字synchronized可以确保多个线程在同一时刻只有一个线程处于方法或同步块中，保证了可变和排他


- **等待/通知机制**

	等待方执行原则如下
	1.  获取对象的锁
	2.  如果条件不满足那么调用对象的wait()方法，被通知后仍要检查条件
	3.  条件满足则执行对应的逻辑
	
	通知方遵守原则亦是
