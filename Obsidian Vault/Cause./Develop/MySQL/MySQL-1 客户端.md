
![[MySQL 客户端.png|400]]


### 连接器

连接器负责跟客户端建立连接、获取权限、维持和管理连接。

#### wait_timeout
客户端如果长时间没动静，连接器就会自动断开。默认时间8h
建议使用长连接解决频繁重建过程，但长也会面对长时间积累下来内存上涨问题，解决方案主要有：
1. 定期断开
2. 可以在每次执行一个比较大操作后 mysql_reset_connection 来重新初始化

### 解析与优化
#### 查询缓存

简单来说就是把查询语句和查询结果以key-value形式保存下来。
但这种方式下value表数据一旦更新就会清空缓存，往往弊大于利
#### 分析器

#### 优化器
优化器是在表里面有多个索引决定使用哪个索引；或者一个语句有多表关联join的时候决定各个表连接顺序。
```sql
-- 是先从t1过滤还是t2，优化器会优化
mysql> select * from t1 join t2 using(id) where t1.c = 10 and t2.d = 20;
```


#### 执行器


### 存储引擎
也可以叫做表处理器。用于记录、读取一行行的表记录。各种不同的存储引擎向上边的MySQL Server层提供统一的调用接口，包含了几十个底层函数如“读取索引第一条内容”、“读取索引下一条内容”、“插入记录”等等
MySQL支持多种存储引擎
* InnoDB：具备外键、支持功能的事物存储器
* MEMORY：置于内存的表
* MyISAM：主要的非事务处理存储引擎？？