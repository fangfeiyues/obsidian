```SQL
[server]
innodb_buffer_pool_size = 268435456 （ 265M，默认128M ）
```

### Buffer Pool 内部组成

![[MySQL-4 Buffer Pool.png]]


### free链表

![[MySQL-4 Buffer Pool-1.png]]

LRU管理，线型管理缓存的数据。
#### 优化
但也会发现两个问题
1.  预读会导致一批数据加载到buffer中，如果这些数据用不到可能导致缓存命中率下降
2.  全表扫描的时候，换血Buffer也会影响到命中率
所以优化后把LRU链表通过配置 `innodb_old_blocks_time` 来按一定比例分成两截，分别频率使用高的 热数据young区域 和 一般的 冷数据或old区域。

#### 进一步优化
    防止 `young` 区域的热点数据被频繁移动到头部，只有被访问的缓存页位于`young`区域的`1/4`的后边，才会被移动到`LRU链表`头部


### 刷新脏页到磁盘

后台线程会在每隔一段时间负责把脏页刷新到磁盘，这样可以不影响用户正常请求。主要有两种刷新路径
1.  从 LRU链表 的冷数据中刷新一部分到磁盘
2.  从 flush链表 中刷新一部分
