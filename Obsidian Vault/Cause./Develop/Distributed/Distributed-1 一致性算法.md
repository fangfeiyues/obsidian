怎么理解一致性？在分布式系统中，各个节点

## 不得不说的CAP
对于CAP的再理解
- C：对于某个客户端来说，读操作保证能返回最新的写结果
- A：非故障节点在合理时间内返回合理的响应
- P：当出现网络分区（丢包、连接中断、拥塞等原因）后，系统能继续履行职责

理解 CAP 理论的最简单方式是想象两个节点分处分区两侧。允许至少一个节点更新状态会导致数据不一致，即丧失了 C 性质。如果为了保证数据一致性，将分区一侧的节点设置为不可用，那么又丧失了 A 性质。除非两个节点可以互相通信，才能既保证 C 又保证 A，这又会导致丧失 P 性质。一般来说跨区域的系统，设计师无法舍弃 P 性质，那么就只能在数据一致性和可用性上做一个艰难选择


关于“数据一致性 VS 可用性”的第一回合争论表现为 ACID 和 BASE 之争，提出 CAP 目的是证明有必要开拓更广阔的设计空间，因此才有了 ”三选二” 公式。但其有些误导性，主要表现为

1. 分区很少发生，那么在系统不存在分区的情况下没什么理由牺牲 C 或 A
2. C 与 A之间的取舍可以在同一系统内以非常小的粒度发生
3. 3种性质都可以在程度上衡量，并不是非黑即白的。可用性也是0% 到 100%之间连续变化，一致性也分很多级别

CAP主张任何基于网络的数据共享系统，都最多只能拥有以下三条中的两条：

- 数据一致性（C）等同于所有节点访问同一份最新的数据副本
- 对数据更新具备高可用性（A）
- 能容忍网络分区（P）

### CAP和延迟的联系

CAP理论的经典解释是忽略网络延迟的，但在实际中延迟和分区密切相关。依靠多次通信的方法达到一致性比如Paxos 算法或者两阶段事物提交，仅仅是推迟了决策的时间。系统终究要做一个决定：无期限的尝试下去，本身就是牺牲可用性的表现。


https://www.infoq.cn/article/cap-twelve-years-later-how-the-rules-have-changed

## 一致性算法
### ConsistentHash


### Paxos


### Raft

 选举的票数大于等于num(sentinels)/2+1时，将成为领导者，如果没有超过，继续选举