
> 三步曲：做什么 -- 怎么做 -- 为什么

MySQL存储要回答的几个问题（持续更新ing...）
1. 怎么支持ACID？也就是写入过程保证原子性、持久性、隔离性和一致性 ...
2.  怎么支持高并发流量？写速度怎么保证、有没有缓存、怎么解决读写一致问题 ... 
3.  怎么保证高可用？宕机后怎么恢复、水平扩展怎么做的 ... 

## MySQL的一次存储更新之旅

1、客户端处理

2、写入buffer pool

3、记录变更前undo log

3、记录redo log

4、刷脏

5、记录binlog 

6、主从同步


![[image-MySQL-2 存储-20240527235945983.png]]


## InnoDB  vs  MyISAM

1.  InnoDB 支持事务，MyISAM 不支持
	 1.  MyISAM用表锁定，不利于事务的并发执行。
	 2.  MyISAM用缓冲池提高速度，在执行事务时需先写入缓冲再刷到磁盘，不适合事务频繁提交和回滚（InnoDB不也是？？？）
	 3.  MyISAM 数据文件和索引文件分开，不支持原子性恢复（？？？）
2.  InnoDB是聚集索引，MyISAM是非聚集索引。MyISAM采用了一种索引和数据分的存储方式
3.  InnoDB最小粒度是行锁，MyISAM的最小粒度是表锁








